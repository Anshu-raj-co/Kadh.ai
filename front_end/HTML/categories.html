<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Categories - Kadh.ai</title>
    <link rel="stylesheet" href="app_organized.css">
    <script src="auth.js"></script>
    <script src="recipes.js"></script>
    <style>
        /* Reset and Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f7f7f7;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Navbar */
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            height: 65px;
            padding: 0 40px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .navbar .logo {
            height: 50px;
            width: auto;
        }

        /* Content Container */
        .content-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 30px;
            flex-grow: 1;
        }

        .content-container h1 {
            font-size: 2.5em;
            font-weight: 600;
            color: #222;
            margin-bottom: 10px;
            text-align: center;
        }

        .content-container .sub-heading {
            font-size: 1.1em;
            color: #666;
            text-align: center;
            margin-bottom: 40px;
        }

        /* Category Grid */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px 0;
            max-width: 1000px;
            margin: 0 auto;
        }

        .category-card {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 150px;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            background-color: #f8b400;
            color: white;
            border-color: #f8b400;
        }

        .category-card h3 {
            font-size: 1.4em;
            margin-bottom: 10px;
        }

        /* Results Container */
        .results-container {
            display: none;
            margin-top: 30px;
        }

        .results-container.active {
            display: block;
        }

        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }

        .recipe-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .recipe-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .recipe-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .recipe-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .recipe-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .recipe-description {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .recipe-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: #666;
        }

        .recipe-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .recipe-button {
            background-color: #f8b400;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease;
            text-align: center;
            margin-top: auto;
        }

        .recipe-button:hover {
            background-color: #e0a800;
        }

        .back-button {
            display: none;
            background-color: #f8b400;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background-color: #e0a800;
            transform: translateX(-5px);
        }

        .back-button.active {
            display: inline-block;
        }

        /* Recipe Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 15px;
            max-width: 800px;
            position: relative;
        }

        .close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
        }

        .modal-title {
            font-size: 2em;
            margin-bottom: 20px;
            color: #333;
        }

        .modal-recipe {
            white-space: pre-line;
            line-height: 1.6;
            color: #444;
        }

        /* Footer */
        .footer {
            background-color: #333;
            color: #ccc;
            padding: 25px;
            text-align: center;
            font-size: 0.9em;
            margin-top: 60px;
        }

        .footer a {
            color: #f8b400;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .content-container {
                margin: 20px auto;
                padding: 0 20px;
            }

            .content-container h1 {
                font-size: 2em;
            }

            .category-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .recipe-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .modal-content {
                margin: 20px;
                padding: 20px;
            }
        }

        .modal-content {
            max-width: 800px;
            width: 90%;
            padding: 20px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .favorite-button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            transition: transform 0.2s;
        }

        .favorite-button:hover {
            transform: scale(1.1);
        }

        .favorite-button.active .heart-icon {
            color: red;
            content: "♥";
        }

        .modal-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .recipe-details {
            padding: 20px;
        }

        .recipe-meta-info {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .recipe-meta-info span {
            background: #f5f5f5;
            padding: 8px 12px;
            border-radius: 20px;
        }

        .recipe-instructions {
            margin-top: 20px;
            white-space: pre-line;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <p><a href="homepage.html">
            <img src="https://i.ibb.co/x8rsTWDy/kadhai-9.png" alt="Kadhai Logo" class="logo">
        </a></p>
        <div class="nav-links">
            <!-- Navigation links will be dynamically updated by auth.js -->
        </div>
    </div>

    <div class="content-container">
        <h1>Browse Recipes</h1>
        <p class="sub-heading">Select a category to explore recipes</p>

        <button class="back-button" onclick="showCategories()">← Back to Categories</button>

        <div class="category-grid" id="categoryGrid">
            <div class="category-card" data-filter-type="category" data-filter-value="Seafood">
                <h3>Seafood</h3>
                <p>Fresh and delicious seafood recipes</p>
            </div>
            <div class="category-card" data-filter-type="category" data-filter-value="Beef">
                <h3>Beef</h3>
                <p>Hearty beef dishes</p>
            </div>
            <div class="category-card" data-filter-type="category" data-filter-value="Chicken">
                <h3>Chicken</h3>
                <p>Versatile chicken recipes</p>
            </div>
            <div class="category-card" data-filter-type="category" data-filter-value="Pasta">
                <h3>Pasta</h3>
                <p>Italian and pasta dishes</p>
            </div>
            <div class="category-card" data-filter-type="category" data-filter-value="Pork">
                <h3>Pork</h3>
                <p>Delicious pork recipes</p>
            </div>
            <div class="category-card" data-filter-type="category" data-filter-value="Vegetarian">
                <h3>Vegetarian</h3>
                <p>Meat-free options</p>
            </div>
        </div>

        <div class="results-container" id="resultsContainer">
            <h2 id="categoryTitle"></h2>
            <div class="recipe-grid" id="recipeGrid"></div>
        </div>
    </div>

    <!-- Recipe Modal -->
    <div id="recipeModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle"></h2>
                <button id="favoriteButton" class="favorite-button">
                    <span class="heart-icon">♡</span>
                </button>
            </div>
            <div class="modal-body">
                <img id="modalImage" class="modal-image" src="" alt="">
                <div class="recipe-details">
                    <p id="modalDescription" class="recipe-description"></p>
                    <div class="recipe-meta-info">
                        <span>⏱️ Prep Time: <span id="modalPrepTime"></span></span>
                        <span>🔥 Cook Time: <span id="modalCookTime"></span></span>
                        <span>📊 Difficulty: <span id="modalDifficulty"></span></span>
                    </div>
                    <div class="recipe-instructions" id="modalInstructions"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>&copy; Kadh.ai | <a href="#">Contact</a> | <a href="#">About</a></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const categoryCards = document.querySelectorAll('.category-card');
            const resultsContainer = document.getElementById('resultsContainer');
            const categoryGrid = document.getElementById('categoryGrid');
            const recipeGrid = document.getElementById('recipeGrid');
            const categoryTitle = document.getElementById('categoryTitle');
            const backButton = document.querySelector('.back-button');
            const modal = document.getElementById('recipeModal');

            categoryCards.forEach(card => {
                card.addEventListener('click', function() {
                    const category = this.getAttribute('data-filter-value');
                    showRecipes(category);
                });
            });

            function showRecipes(category) {
                categoryTitle.textContent = `${category} Recipes`;
                recipeGrid.innerHTML = '';
                
                if (recipes[category]) {
                    recipes[category].forEach(recipe => {
                        const recipeCard = document.createElement('div');
                        recipeCard.className = 'recipe-card';
                        recipeCard.innerHTML = `
                            <img src="${recipe.image}" alt="${recipe.title}" class="recipe-image">
                            <div class="recipe-info">
                                <h3 class="recipe-title">${recipe.title}</h3>
                                <p class="recipe-description">${recipe.description}</p>
                                <div class="recipe-meta">
                                    <span>⏱️ ${recipe.prepTime}</span>
                                    <span>🔥 ${recipe.cookTime}</span>
                                    <span>📊 ${recipe.difficulty}</span>
                                </div>
                                <button class="recipe-button" onclick="showRecipe('${category}', '${recipe.title}')">View Recipe</button>
                            </div>
                        `;
                        recipeGrid.appendChild(recipeCard);
                    });
                }

                categoryGrid.style.display = 'none';
                resultsContainer.classList.add('active');
                backButton.classList.add('active');
            }

            window.showCategories = function() {
                categoryGrid.style.display = 'grid';
                resultsContainer.classList.remove('active');
                backButton.classList.remove('active');
            };

            const favoriteButton = document.getElementById('favoriteButton');
            let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

            favoriteButton.addEventListener('click', function() {
                const recipeId = this.dataset.recipeId;
                const isFavorited = favorites.includes(recipeId);
                
                if (isFavorited) {
                    favorites = favorites.filter(id => id !== recipeId);
                    this.classList.remove('active');
                    this.querySelector('.heart-icon').textContent = '♡';
                } else {
                    favorites.push(recipeId);
                    this.classList.add('active');
                    this.querySelector('.heart-icon').textContent = '♥';
                }
                
                localStorage.setItem('favorites', JSON.stringify(favorites));
            });

            window.showRecipe = function(category, title) {
                const recipe = recipes[category].find(r => r.title === title);
                if (recipe) {
                    const modal = document.getElementById('recipeModal');
                    document.getElementById('modalTitle').textContent = recipe.title;
                    document.getElementById('modalImage').src = recipe.image;
                    document.getElementById('modalDescription').textContent = recipe.description;
                    document.getElementById('modalPrepTime').textContent = recipe.prepTime;
                    document.getElementById('modalCookTime').textContent = recipe.cookTime;
                    document.getElementById('modalDifficulty').textContent = recipe.difficulty;
                    document.getElementById('modalInstructions').textContent = recipe.recipe;
                    
                    const recipeId = `${category}-${title}`;
                    favoriteButton.dataset.recipeId = recipeId;
                    
                    if (favorites.includes(recipeId)) {
                        favoriteButton.classList.add('active');
                        favoriteButton.querySelector('.heart-icon').textContent = '♥';
                    } else {
                        favoriteButton.classList.remove('active');
                        favoriteButton.querySelector('.heart-icon').textContent = '♡';
                    }
                    
                    modal.style.display = 'block';
                }
            };

            window.closeModal = function() {
                modal.style.display = 'none';
            };

            // Close modal when clicking outside
            window.onclick = function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            };
        });
    </script>
</body>
</html>